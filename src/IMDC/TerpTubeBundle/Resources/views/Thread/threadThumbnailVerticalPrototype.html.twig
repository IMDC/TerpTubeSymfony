{#
included by:
Default:recentactivity.html.twig
#}

{% block threadgrid %}
	{% set counter = 1 %}
	{% for thread in threads %}
		{% if counter % 4 == 1 %}
			<div class="row forum-row">
				<ul class="list-unstyled thumbnails">
		{% endif %}
		<li>
			<div class="col-md-3">
				<div class="thumbnail threadthumbnail text-center">
					{% if thread.mediaIncluded|length != 0 %}
						{% set threadMediaFile = thread.mediaIncluded[0] %}
					{% else %}
						{% set threadMediaFile = null  %}
					{% endif %}
					{# mediatype 0 = image 1 = video 2 = audio 9 = other #}
					{# {% if postMediaFile is not defined or postMediaFile is null %} #}
					{% if threadMediaFile == null %}
						<div class="row thread-title-wrap">
							<div class="col-md-12">
								<a href="{{ path('imdc_thread_view_specific', {'threadid':thread.getId}) }}">
									<h3>{{ thread.title|truncate(50) }}</h3>
								</a>
							</div>
						</div>
						<div class="row">
							<div class="col-md-12">
								<a href="{{ path('imdc_thread_view_specific', {'threadid':thread.getId}) }}">
									{{ thread.content|truncate(250) }}
								</a>
							</div>
						</div>
					{% else %}
						<div class="row">
							<div class="col-md-12">
								<a href="{{ path('imdc_thread_view_specific', {'threadid':thread.getId}) }}">
									{{ include('IMDCTerpTubeBundle:Post:postMediaElement.html.twig', {mediaFile: threadMediaFile}, with_context = false) }}
								</a>
							</div>
						</div>
						<div class="row thread-title-wrap">
							<div class="col-md-12">
								<a href="{{ path('imdc_thread_view_specific', {'threadid':thread.getId}) }}">
									<h3>{{ thread.title|truncate(40) }}</h3>
									<p>{{ thread.content|truncate(50) }}</p>
								</a>
							</div>
						</div>
					{% endif %}
					<div class="row thread-vertical-user-info">
						{# <div class="col-md-3"> #}
							{# {% set member = thread.creator %} #}
							{# {%  include 'IMDCTerpTubeBundle:Member:memberAvatarAndUsername.html.twig' %} #}
						{# </div> #}
						<div class="col-md-12">
							<p>
								<span class="badge badge-info">{{ thread.getPosts|length }} Replies</span>
							</p>
							<p>
								{% if thread.getLastPostAt is defined %}Last post: <span title="{{ thread.lastPostAt|date('g:ia M j Y') }}">{{ time_diff(thread.lastPostAt) }}</span>{% endif %}
							</p>
							<span class="thread-date-span">{% if pagination is defined and pagination.isSorted('t.lastPostAt') %}Last Post: {{ thread.lastPostAt|date('g:ia M j Y') }}{% else %}Created: {{ thread.creationDate|date('g:ia M j Y') }}{% endif %}</span>
						</div>
					</div>
				</div> <!-- /.thumbnail threadthumbnail text-center -->
			</div>
		</li> <!-- ./col-md-3 -->
		{% if (counter != 0 and counter % 4 == 0) or counter == threads|length %}
				</ul>
			</div><!-- end row -->
		{% endif %}
		{% set counter = counter + 1 %}
	{% endfor %}
{% endblock threadgrid %}
