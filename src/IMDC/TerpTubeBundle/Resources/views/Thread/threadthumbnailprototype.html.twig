{% block threadgrid %}
<ul class="thumbnails">
    {% set counter = 1 %}
    <div class="row-fluid">
    {% for thread in threads %}
    {% if counter != 1 and counter % 4 == 1 %}
        <div class="row-fluid">
    {% endif %}
            <li class="span3">
                <div class="thumbnail threadthumbnail text-center">
                	<div class="row-fluid">
                		<div class="span3 post-reply-user-info-wrap">
		                    <div class="row-fluid post-reply-user-avatar-wrap">
		                        <img class="avatar" alt="avatar" title="" src="{{ thread.creator.getProfile.avatar ? asset(thread.creator.getProfile.avatar.getResource.getWebPath):asset('bundles/imdcterptube/img/no_avatar.jpg')}}" />
		                    </div>
		                    <div class="row-fluid text-center post-reply-user-info">
		                        <a href="{{ path('imdc_terp_tube_user_profile_specific', {'userName':thread.creator.getUserName}) }}">{{ thread.creator }}</a>
		                    </div>
		                </div>

{# 		                {% if post.attachedFile is defined and post.attachedFile|length > 0 %}#}
		                {% if thread.mediaIncluded|length != 0 %}
						    {% set threadMediaFile = thread.mediaIncluded[0] %}
					    {% else %}
					    	{% set threadMediaFile = null  %}
						{% endif %}
		                {# mediatype 0 = image 1 = video 2 = audio 9 = other #}
{# 						{% if postMediaFile is not defined or postMediaFile is null %}#}
                        <div class="span9">
						    <div class="row-fluid thread-title-wrap">
						        <a href="{{ path('imdc_thread_view_specific', {'threadid':thread.getId}) }}">
						            <h3>{{ thread.title|truncate(50) }}</h3>
						        </a>
						    </div>
						    <div class="row-fluid">
						{% if threadMediaFile == null %}
    						    <a href="{{ path('imdc_thread_view_specific', {'threadid':thread.getId}) }}">
    			                	{{ thread.content|truncate(250) }}
    		                	</a>
			                </div>
		                </div>
		                {% else %}
    		                	<a href="{{ path('imdc_thread_view_specific', {'threadid':thread.getId}) }}">
    		                	    {{ include('IMDCTerpTubeBundle:Post:postMediaElement.html.twig', {mediaFile: threadMediaFile}, with_context = false) }}
    		                		<div class="row-fluid">
    		                		{{ thread.content|truncate(60) }}
    		                		</div>
    	                		</a>
	                		</div> <!-- ./span9 -->
                		</div>
		                {% endif %}
                	</div> <!-- /.row-fluid -->
{#                 	<div class="row-fluid">#}
{#                     <p><span class="content-created-datetime-span">Created: {{ post.created|date('g:ia M j Y') }}</span></p>#}
{#                     </div>#}
                
                </div> <!-- /.thumbnail text-center -->
            </li>
    {% if counter != 0 and counter % 4 == 0 %}
        </div><!-- end row-fluid -->
        <p></p>
    {% endif %}
    {% set counter = counter + 1 %}
{% endfor %}
    </div>
</ul>
{% endblock threadgrid %}