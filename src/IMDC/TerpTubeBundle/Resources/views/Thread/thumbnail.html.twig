{#
included by:
_Forum:view.html.twig
#}

{% for thread in threads %}
	{% if loop.index % 4 == 1 %}
		<div class="row">
			<ul class="list-unstyled">
	{% endif %}
	<li>
		<div class="col-md-3">
            <div class="thumbnail text-center tt-thread-thumbnail">
                <div class="row">
                    <div class="col-md-12 text-right">
                        {% include 'IMDCTerpTubeBundle:Base:permissionIcons.html.twig' with {'object': thread} %}
                    </div>
                </div>
                <div class="row">
                    {#TODO CSS ME#}
                    <div class="col-md-12 tt-media-element" style="height: 270px; -webkit-transform-style: preserve-3d; -moz-transform-style: preserve-3d; transform-style: preserve-3d;">
                        <div style="position: relative; top: 50%; transform: translateY(-50%);">
                            {% if thread.mediaIncluded[0] is defined %}
                                {% include 'IMDCTerpTubeBundle:Media:element.html.twig' with {'mediaFile': thread.mediaIncluded[0]} %}
                            {% else %}
                                <i class="fa fa-question fa-3x"></i><br />
                                <em>no media</em>
                            {% endif %}
                        </div>
                        {#TODO CSS ME#}
                        <script type="text/javascript">$(".tt-media-element > div video, .tt-media-element > div img").css("max-height", "270px");</script>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <p>
                            {% include 'IMDCTerpTubeBundle:Member:avatar.html.twig' with {'member': thread.creator} %}
                            {% include 'IMDCTerpTubeBundle:Member:username.html.twig' with {'member': thread.creator} %}
                        </p>
                    </div>
                    <div class="col-md-8" style="border-left: 1px solid #dddddd;">
                        <a href="{{ path('imdc_thread_view', {'threadid': thread.getId}) }}" title="{{ thread.title }}">
                            <p style="font-size: 24px;">
                                {% if thread.title %}
                                    {{ thread.title|truncate(20) }}
                                {% else %}
                                    {{ '<em>no title</em>'|raw }}
                                {% endif %}
                            </p>
                            <p class="text-muted">
                                <i class="fa fa-pencil-square-o" title="Reply count"></i> {{ thread.posts|length }} replies<br />
                                <i class="fa fa-clock-o" title="Last activity"></i> {{ time_diff(thread.lastPostAt) }}
                            </p>
                        </a>
                    </div>
                </div>
            </div>
		</div>
	</li>
	{% if loop.index % 4 == 0 or loop.last %}
			</ul>
		</div>
	{% endif %}
{% endfor %}
