{% block threadgrid %}
<ul class="thumbnails">
    {% set counter=1 %}
    <div class="row-fluid">
    {% for thread in threads %}
    {% if counter != 1 and counter % 4 == 1 %}
        <div class="row-fluid">
    {% endif %}
            <li class="span3">
                <a href="{{ path('imdc_thread_view_specific', {'threadid': thread.id} ) }}">
                <div class="thumbnail text-center">
                <p>
                {% if thread.mediaIncluded|length != 0 %}
                    {% set mediaFile = thread.mediaIncluded[0] %}
                {% else %}
                    {% set mediaFile = null %}
                {% endif %}
                {% if mediaFile != null %}
                    {# mediatype 0 = image 1 = video 2 = audio 9 = other #}
                    {% if mediaFile.type == 0 %}
                        <img class="forum-img-thumbnail" src="{{ asset(mediaFile.getResource.getWebPath) }}" />
                    {% elseif mediaFile.type == 1 %}
                        <video controls class="forum-video-thumbnail" preload="auto">
                        	<source src="{{ asset(mediaFile.getResource.getWebPathWebm) }}" />
                        	<source src="{{ asset(mediaFile.getResource.getWebPath) }}" />
                        </video>
                    {% elseif mediaFile.type == 2 %}
                        <audio controls>
                            <source src="{{ asset(mediaFile.getResource.getWebPath) }}" />
                        </audio>
                    {% else %}
                    
                    {% endif %}
                {% endif %}
                    </p>
                    <h3>{{ thread.title | truncate(20) }}</h3>
                    <p>Content: {{ thread.content|truncate(30) }}</p>
                    <p>Created: {{ thread.creationDate|date('g:ia M j, Y') }}</p>
                    <p>Author: {{ thread.creator }}</p>
                </a>
            </li>
    {% if counter != 0 and counter % 4 == 0 %}
        </div><!-- end row-fluid -->
        <p></p>
    {% endif %}
    {% set counter = counter + 1 %}
{% endfor %}
    </div>
</ul>
{% endblock threadgrid %}