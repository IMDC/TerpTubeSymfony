<ul class="thumbnails">
    {% set counter = 1 %}
    <div class="row-fluid">
    {% for post in posts %}
    {% if counter != 1 and counter % 4 == 1 %}
        <div class="row-fluid" data-rowid="{{ counter }}">
    {% endif %}
            <li class="span3">
            	{% if post.getParentThread.getId is defined %}
{#             	<a href="{{ path('imdc_thread_view_specific', {'threadid':post.getParentThread.getId}) }}">#}
                {% endif %}
                <div class="thumbnail postthumbnail text-center">
                	<div class="row-fluid">
                		<div class="span3 post-reply-user-info-wrap">
		                    <div class="row-fluid post-reply-user-avatar-wrap">
		                        <img class="avatar" alt="avatar" title="" src="{{ post.author.getProfile.avatar ? asset(post.author.getProfile.avatar.getResource.getWebPath):asset('bundles/imdcterptube/img/no_avatar.jpg')}}" />
		                    </div>
		                    <div class="row-fluid text-center post-reply-user-info">
		                        <a href="{{ path('imdc_terp_tube_user_profile_specific', {'userName':post.author.getUserName}) }}">{{ post.author }}</a>
		                    </div>
		                </div>
		                {% if post.attachedFile is defined and post.attachedFile|length > 0 %}
						    {% set postMediaFile = post.attachedFile[0] %}
					    {% else %}
					    	{% set postMediaFile = none  %}
						{% endif %}
		                {# if has media span 5 #}
		                {# mediatype 0 = image 1 = video 2 = audio 9 = other #}
						{% if postMediaFile is not defined or postMediaFile is null %}
						    <div class="span9">
			                	{{ post.content|truncate(60) }}
			                </div>
		                {% else %}
		                	<div class="span9">
		                	
			                	{% if postMediaFile.type == 0 %}
								{# -----------   if type of media is an IMAGE   -------- #}
							    <div class="row-fluid">
							    <img class="forum-img-thumbnail" src="{{ asset(postMediaFile.getResource.getWebPath) }}" />
							    </div>
								{# -----------   if type of media is a VIDEO   -------- #}
								{% elseif postMediaFile.type == 1 %}
						        <div class="row-fluid">
							        <video controls width="100%" id="{{ postMediaFile.getID }}" preload="auto">
							        	<source src="{{ asset(postMediaFile.getResource.getWebPathWebm) }}"/>
							        	<source src="{{ asset(postMediaFile.getResource.getWebPath) }}"/>
							        </video>
						        </div>
								{% elseif postMediaFile.type == 2 %}
								{# -----------   if type of media is AUDIO   -------- #}
						        <div class="row-fluid">
							        <audio controls style="width: 100%">
							            <source src="{{ asset(postMediaFile.getResource.getWebPath) }}" />
							            Your browser does not support the audio element, please upgrade to Google Chrome
							        </audio>
						        </div>
								{% endif %}
		                		<div class="row-fluid">
		                		{{ post.content|truncate(60) }}
		                		</div>
		                {% endif %}
		                
                	</div>
{#                 	<div class="row-fluid">#}
{#                     <p><span class="content-created-datetime-span">Created: {{ post.created|date('g:ia M j Y') }}</span></p>#}
{#                     </div>#}
                
                </div> <!-- /.thumbnail text-center -->
                {% if post.getParentThread is defined %}
{#                 </a>#}
                {% endif %}
            </li> <!-- /.span3 -->
    {% if counter != 0 and counter % 4 == 0 %}
        </div> <!--  /.row-fluid  data-rowid {{ counter }} -->
        <p></p>
    {% endif %}
    {% set counter = counter + 1 %}
{% endfor %}
    </div> <!-- /.row-fluid -->
</ul> <!-- /.thumbnails -->