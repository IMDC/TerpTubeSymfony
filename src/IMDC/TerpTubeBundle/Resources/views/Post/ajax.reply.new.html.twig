{#{% include 'IMDCTerpTubeBundle:Post:view.html.twig' %}#}

{% set newPost = {id: '0' ~ random()} %}
{% include 'IMDCTerpTubeBundle:Post:reply.html.twig' %}

<script type="text/javascript">
    require([
        'bootstrap',
        'model/postModel', 'controller/postController', 'views/post',
        'core/helper', 'main'
    ], function(bootstrap, PostModel, PostController, PostView, Helper) {
        var $newPost = $(PostView.Binder.CONTAINER + "[data-pid={{ newPost.id }}]");
        bootstrap(
                new PostModel({
                    id: $newPost.data("pid"),
                    startTime: $newPost.data("starttime"),
                    endTime: $newPost.data("endtime"),
                    isTemporal: $newPost.data("istemporal"),
                    threadId: "{{ post.parentThread.id|default(null) }}",
                    parentPostId: "{{ post.id|default(null) }}"
                }),
                PostController,
                PostView,
                {}
        );

        Helper.autoSize();
    });
</script>
