{% macro type_to_icon(type) %}
    {% if type == constant('IMDC\\TerpTubeBundle\\Entity\\Media::TYPE_VIDEO') %}
        {% set icon = 'fa-file-video-o' %}
        {% set type_str = 'Video' %}
    {% elseif type == constant('IMDC\\TerpTubeBundle\\Entity\\Media::TYPE_AUDIO') %}
        {% set icon = 'fa-file-audio-o' %}
        {% set type_str = 'Audio' %}
    {% elseif type == constant('IMDC\\TerpTubeBundle\\Entity\\Media::TYPE_IMAGE') %}
        {% set icon = 'fa-file-photo-o' %}
        {% set type_str = 'Image' %}
    {% elseif type == constant('IMDC\\TerpTubeBundle\\Entity\\Media::TYPE_OTHER') %}
        {% set icon = 'fa-file-o' %}
        {% set type_str = 'Other' %}
    {% endif %}
    <i class="fa {{ icon }} fa-2x" title="{{ type_str }}"></i>
{% endmacro %}

{% macro format_size(size) %}
    {% if size == -1 %}
        <i class="fa fa-spinner fa-spin fa-large"> </i>
    {% else %}
        {{ '%.2f'|format(size / 1024 / 1024) }} MB
    {% endif %}
{% endmacro %}

{% macro thumbnail(path, css_class) %}
    {% set css_class = css_class|default('img-responsive center-block tt-thumbnail') %}

    {% if path is not null %}
        <img class="{{ css_class }}" src="{{ asset(path) }}" />
    {% else %}
        <span class="fa-stack fa-lg">
            <i class="fa fa-file-o fa-stack-2x"></i>
            <i class="fa fa-play-circle fa-stack-1x"></i>
        </span>
    {% endif %}
{% endmacro %}

{% macro element(media, enable_controls) %}
    {% set enable_controls = enable_controls is defined ? enable_controls : true %}

    {% if media.type == constant('IMDC\\TerpTubeBundle\\Entity\\Media::TYPE_VIDEO') %}
        <video class="tt-media-video" {% if enable_controls %}controls{% endif %} poster="{{ asset(media.getThumbnailPath) }}" preload="metadata">
            <source src="{{ asset(media.getResource.getWebPath) }}" />
        </video>
        {% if media.isInterpretation %}
            <video class="tt-media-pip-video" poster="{{ asset(media.source.getThumbnailPath) }}" preload="metadata">
                <source src="{{ asset(media.source.getResource.getWebPath) }}" />
            </video>
        {% endif %}
    {% elseif media.type == constant('IMDC\\TerpTubeBundle\\Entity\\Media::TYPE_AUDIO') %}
        <audio class="tt-media-audio" {% if enable_controls %}controls{% endif %}>
            <source src="{{ asset(media.getResource.getWebPath) }}" />
            Your browser does not support the audio element, please upgrade to Google Chrome
        </audio>
    {% elseif media.type == constant('IMDC\\TerpTubeBundle\\Entity\\Media::TYPE_IMAGE') %}
        <img class="img-responsive center-block tt-media-img" src="{{ asset(media.getResource.getWebPath) }}" alt="{{ media.title }}" title="{{ media.title }}" />
    {% elseif media.type == constant('IMDC\\TerpTubeBundle\\Entity\\Media::TYPE_OTHER') %}
        <div class="row">
            <div class="col-md-3 thumbnail text-center">
                <a href="{{ asset(media.getResource.getWebPath) }}">
                    <p><i class="fa fa-file fa-5x"></i></p>
                    <div>{{ media.title }}</div>
                </a>
            </div>
        </div>
    {% endif %}
{% endmacro %}
