{% extends 'IMDCTerpTubeBundle:_Base:base.html.twig' %}

{% block title %}Forums{% endblock title %}

{% block sidebarlinks_pages %}class="active"{% endblock %}

{% block content %}
	<div class="col-md-12">
		{% if is_granted('ROLE_CREATE_FORUMS') %}
			<!--<div class="row">
			<div class="col-md-2">
				<form class="form">
					<div class="form-group">
						<div class="input-group">
							<input class="form-control" type="text" placeholder="Search forums...">
							<div class="input-group-addon" type"submit"><i class="fa fa-search"></i></div>
						</div>
					</div>
				</form>
			</div>
		</div>-->
			<div class="row">
				<div class="col-md-12">
					<p>
						<a class="btn btn-default" href="{{ path('imdc_forum_create_new') }}"><i class="fa fa-plus"></i> Create New Forum</a>
					</p>
				</div>
			</div>
		{% endif %}
		<!-- recent forum activity -->
		<div class="row">
			<div class="col-md-offset-1 col-md-10">
				<img class="img-responsive center-block" src="" />
			</div>
		</div>
		<div class="row">
			<div class="col-md-offset-1 col-md-10">
				<hr class="tt-separator-top" />
				{% if recentForums|length > 0 %}
					{% include 'IMDCTerpTubeBundle:_Forum:thumbnail.html.twig' with {'forums': recentForums} %}
				{% else %}
					<p class="text-center" style="margin-bottom: 20px;">No recent forums</p>
				{% endif %}
				<hr class="tt-separator-bottom" />
			</div>
		</div>
		<!-- all forums -->
		<div class="row">
			<div class="col-md-offset-1 col-md-10">
				<img class="img-responsive center-block" src="" />
			</div>
		</div>
		<div class="row">
			<div class="col-md-offset-1 col-md-10">
				<hr class="tt-separator-top" />
                {% if forums|length > 0 %}
                    {% set pagParams = forums.getParams %}
                    <div class="btn-group" style="margin-bottom: 10px;">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            Sort by
                            {% if forums.isSorted('f.lastActivity') %}Last Activity
                            {% elseif forums.isSorted('f.titleText') %}Title
                            {% elseif forums.isSorted('f.creationDate') %}Date Created
                            {% endif %}
                            {% if 'asc' in pagParams %}(ascending)
                            {% elseif 'desc' in pagParams %}(descending)
                            {% endif %}
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li>{{ knp_pagination_sortable(forums, 'Last Activity', 'f.lastActivity') }}</li>
                            <li>{{ knp_pagination_sortable(forums, 'Title', 'f.titleText') }}</li>
                            <li>{{ knp_pagination_sortable(forums, 'Date Created', 'f.creationDate') }}</li>
                        </ul>
                    </div>
					{% include 'IMDCTerpTubeBundle:_Forum:thumbnail.html.twig' %}
				{% else %}
					<p class="text-center" style="margin-bottom: 20px;">No forums</p>
				{% endif %}
				<hr class="tt-separator-bottom" />
			</div>
		</div>
		<div class="row">
			<div class="col-md-offset-1 col-md-10">
				{{ knp_pagination_render(forums) }}
			</div>
		</div>
	</div>
{% endblock content %}
