{% trans_default_domain 'IMDCTerpTubeBundle' %}
<!DOCTYPE html>

<html lang="en">
    <head>
        <title>{% block title %}{% endblock %} | TerpTube</title>

        <!--  Bootstrap has to come before font awesome for everything to work right -->
        <link rel="stylesheet" type="text/css" href="{{ asset('css/bootstrap.css') }}">

        <link rel="stylesheet" type="text/css" href="{{ asset('bundles/bmatznerfontawesome/css/font-awesome.min.css') }}" />

        <script src="{{ asset('js/jquery.js') }}"></script>
        <script src="{{ asset('js/jquery-ui.js') }}"></script>

        {# <link rel="stylesheet" href="{{ asset('css/jquery-ui.min.css') }}"> #}
        <link rel="stylesheet" type="text/css" href="{{ asset('bundles/sonatajquery/themes/flick/jquery-ui-1.10.4.custom.css') }}">

        <!-- jQuery autosize textboxes script -->
        <script src="{{ asset('bundles/imdcterptube/js/autosize/jquery.autosize.min.js') }}"></script>

        <script src="{{ asset('js/tag-it.min.js') }}"></script>
        <link rel="stylesheet" type="text/css" href="{{ asset('css/jquery.tagit.css') }}">

        <script src="{{ asset('js/require.js') }}"></script>

        <!-- Recorder for web-rtc -->
        <script src="//www.webrtc-experiment.com/RecordRTC.js" />
        <script type="text/javascript">
            if (typeof RecordRTC !== 'function')
                document.write('<script src="{{ asset('js/RecordRTC.js') }}"><\/script>');
        </script>

        <!--  FOS js routing script -->
        <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
        <script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
        <script src="../assets/js/html5shiv.js"></script>
        <![endif]-->

        {% block header %}
            <link rel="stylesheet" type="text/css" href="{{ asset('bundles/imdcterptube/css/player/player.css') }}">
            <link rel="stylesheet" type="text/css" href="{{ asset('bundles/imdcterptube/_css/terptube.css') }}">

            <script src="{{ asset('bundles/imdcterptube/js/player/player.js') }}"></script>
            {% if app.environment == 'dev' %}
                <script type="text/javascript">
                    requirejs.config({
                        baseUrl: '{{ app.request.basePath }}/bundles/imdcterptube/_js/app',
                        paths: {
                            extra: 'lib/extra',
                            dust: 'lib/dust-full-0.3.0.min'
                        },
                        shim: {
                            main: {
                                deps: ['extra', 'dust']
                            }
                        }
                    });

                    require(['main']);
                </script>
            {% else %}
                <script src="{{ asset('bundles/imdcterptube/_js/terptube.js') }}"></script>
            {% endif %}
        {% endblock header %}
    </head>
    <body>
        <div class="container-fluid">
            <div class="row">
                <div class="navbar navbar-inverse navbar-fixed-top tt-navbar-top">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-1">
                                <div class="navbar-header tt-navbar-header">
                                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#tt-navbar-collapse-1">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                    </button>
                                    <a href="{{ path('imdc_home_user_home') }}">
                                        <img class="img-responsive center-block tt-navbar-logo" src="{{ asset('bundles/imdcterptube/img/tt_logo_68wx51h.png') }}">
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-11" style="padding-left: 0;">
                                <div class="collapse navbar-collapse" id="tt-navbar-collapse-1">
                                    {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                                        <ul class="nav navbar-nav tt-navbar-nav-top">
                                            <li {% block nav_ul_authenticated_my_files %}{% endblock %}>
                                                <a class="navbar-link sign-popover" data-placement="bottom" data-content="<img src='{{ asset('bundles/imdcterptube/img/info.gif') }}'/>" href="{{ path('imdc_myfiles_list') }}"><i class="fa fa-folder-open fa-2x"></i></a>
                                            </li>
                                            <!-- TODO interpretations disabled for now
                                            <li {% block nav_ul_authenticated_my_interpretations %}{% endblock %}>
                                                <a class="navbar-link sign-popover" data-placement="bottom" data-content="<img src='{{ asset('bundles/imdcterptube/img/create.gif') }}'/>" href="{{ path('imdc_myfiles_list_interpretations') }}"><i class="fa fa-film fa-2x"></i></a>
                                            </li>-->
                                            <li {% block nav_ul_authenticated_my_friends %}{% endblock %}>
                                                <a class="navbar-link sign-popover" data-placement="bottom" data-content="<img src='{{ asset('bundles/imdcterptube/img/create.gif') }}'/>" href="{{ path('imdc_member_friend_list') }}"><i class="fa fa-user fa-2x"></i></a>
                                            </li>
                                            <li {% block nav_ul_authenticated_my_groups %}{% endblock %}>
                                                <a class="navbar-link sign-popover" data-placement="bottom" data-content="<img src='{{ asset('bundles/imdcterptube/img/info.gif') }}'/>" href="{{ path('imdc_group_my_groups') }}"><i class="fa fa-users fa-2x"></i></a>
                                            </li>
                                            {% if is_granted('ROLE_SUPER_ADMIN') %}
                                                <li {% block nav_ul_authenticated_admin %}{% endblock %}>
                                                    <a class="navbar-link" href="{{ path('sonata_admin_dashboard') }}"><i class="fa fa-cogs fa-2x"></i></a>
                                                </li>
                                            {% endif %}
                                        </ul>
                                        <ul class="nav navbar-nav navbar-right tt-navbar-nav-top tt-navbar-right-top">
                                            <li>
                                                <a class="navbar-link" href="{{ path('imdc_profile_me') }}">
                                                    <i class="fa fa-user fa-lg"></i> {{ app.user.username }}
                                                </a>
                                            </li>
                                            <li>
                                                <a class="navbar-link toolpop" href="{{ path('imdc_message_inbox') }}" title="Inbox">
                                                    <i class="fa fa-envelope fa-lg"></i> <span class="badge badge-{{ app.user.getNumUnreadPMs > 0 ? 'success': 'inverse' }}">{{ app.user.getNumUnreadPMs }}</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a class="navbar-link toolpop" href="{{ path('imdc_invitation_list') }}" title="Invitations">
                                                    <i class="fa fa-inbox fa-lg"></i> <span class="badge badge-{{ app.user.getNumActiveInvitations > 0 ? 'success': 'inverse' }}">{{ app.user.getNumActiveInvitations }}</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a class="navbar-link" href="{{ path('fos_user_security_logout') }}">
                                                    {{ 'layout.logout'|trans({}, 'FOSUserBundle') }} <i class="fa fa-sign-out fa-lg"></i>
                                                </a>
                                            </li>
                                        </ul>
                                    {% else %}
                                        {% render controller('IMDCTerpTubeBundle:Security:login') %}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="container-fluid">
                    <div class="row">
                        {% block base_content %}
                        {% endblock base_content %}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="navbar navbar-inverse navbar-fixed-bottom tt-navbar-bottom">
                    <div class="container-fluid">
                        <div class="text-center tt-copyright">
                            &copy; IMDC, EKU 2014
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% block javascripts %}
            <script src="{{ asset('js/bootstrap.js') }}"></script>
        {% endblock javascripts %}
    </body>
    {% block outside_body %}
    {% endblock outside_body %}
</html>
